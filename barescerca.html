<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Poblenou</title>
    <style>
        ul,
        ol {
            list-style: none
        }

        h1,
        h1,
        h3,
        h4,
        h5,
        h6,
        pre,
        code {
            font-size: 1em;
        }

        ul,
        ol,
        li,
        h1,
        h1,
        h3,
        h4,
        h5,
        h6,
        pre,
        form,
        body,
        html,
        p,
        blockquote,
        fieldset {
            margin: 0;
            padding: 0;
            line-height: 1;
            list-style: none;
        }

        a img,
        :link img,
        :visited img,
        fieldset {
            border: none;
        }

        input[type=submit],
        input[type=reset],
        input[type=button] {
            *filter: chroma(color=#000000);
        }

        #estructura {
            width: 100%;
            height: 800px;
            margin: 0px auto;
        }

        body {
            background: #DCDCDC;
        }

        #main-header:hover {
            color: rgb(17, 143, 201);
        }

        #main-header {
            text-decoration: none;
            color: black;
        }

        #navegacion {
            background: #32333a;
            padding-top: 10px;
            height: 40px;
            width: 100%;
            margin: 5px auto;
            position: fixed;
            top: 65px;
            z-index: 25;
        }

        .nav {
            display: inline-block;
            color: white;
            font-size: 20px;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            font-weight: bold;
            border-bottom: 3px solid transparent;
            border-radius: 7px;
            background: transparent;
            box-shadow: -2px 1px 1px 1px rgb(153, 124, 153);
            padding: 5px;
            margin-left: 21%;
        }

        .nav-url:link {
            color: white;
        }

        .nav-url:visited {
            text-decoration: none;
            color: white;
        }

        .nav-url:hover {
            color: rgb(17, 143, 201);
        }

        #barra-fixed {
            background-color: #808080;
            position: fixed;
            height: 70px;
            width: 100%;
            z-index: 25;
            padding: 0;
            top: 0px;
        }

        #seccion {
            background: transparent;
            height: 900px;
            width: 100%;
            margin: 5px auto 5px auto;
            z-index: 10;
        }

        #footer {
            background: transparent;
            height: 121px;
            width: 100%;
            margin: 5px 0 5px 0;
        }

        #footer-text {
            text-align: center;
            font-family: 'Times New Roman', Times, serif;
            font-size: 20px;
            margin-top: 40px;
        }

        #contenido {
            position: relative;
            height: 900px;
            width: 1500px;
            border: solid black;
            top: -5px;
            margin: 0 auto;
        }

        #fixed-cabecera1 {
            float: left;
            padding-left: 20%;
            font-size: 50px;
            font-weight: bold;
            padding-top: 8px;
            border-right: solid black;
        }

        #fixed-cabecera2 {
            float: left;
            padding-left: 2%;
            font-weight: bold;
        }

        #fixed-cabecera3 {
            float: left;
            padding-left: 25%;
        }

        #fixed-cabecera4 {
            float: left;
            padding-left: 2%;
        }

        #fixed-cabecera5 {
            float: left;
            padding-left: 2%;
        }

        #ico-tel {
            height: 50px;
            padding-top: 10px;
        }

        #ico-mail {
            height: 50px;
            padding-top: 10px;
        }

        #ico-nav {
            height: 50px;
            padding-top: 10px;
        }

        #titulo {
            text-decoration: none;
            color: #000
        }

        #titulo:hover {
            color: rgb(17, 143, 201);
        }

        .titulos:hover {
            color: rgb(17, 143, 201);
        }

        #mapAqui {
            border: solid black;
            height: 794px;
            width: 100%px;
            top: 101px;
        }

        #infoWindow {
            position: relative;
            height: 280px;
            width: 360px;
            margin: 0;
            box-shadow: -14px 0px 0px rgb(189, 20, 20), -14px 9px 0px rgb(184, 15, 15), -14px rgb(145, 21, 21)x rgb(167, 18, 18), 15px -8px 0px #DCDCDC, 15px 9px 0px #DCDCDC4c
        }

        .iw-content {
            height: 290px;
            width: 350px;
        }


        .gm-style .gm-style-iw-c {
            position: absolute;
            box-sizing: border-box;
            overflow: hidden;
            top: 0;
            left: 0;
            transform: translate(-50%, -100%);
            background-color: #ff2301;
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 2px 7px 1px red;
        }

        .gm-style .gm-style-iw-d::-webkit-scrollbar-track,
        .gm-style .gm-style-iw-d::-webkit-scrollbar-track-piece {
            background: #ff2301;
        }

        #info-titulo {
            position: absolute;
            height: 30px;
            width: 305px;
            background: #C0C0C0;
            top: 10px;
            left: 35px;
        }

        #info-descp {
            position: absolute;
            height: 190px;
            width: 150px;
            background: #C0C0C0;
            top: 45px;
            left: 35px
        }

        #info-img {
            position: absolute;
            height: 190px;
            width: 150px;
            background: #4c4c4c;
            top: 45px;
            left: 190px
        }

        #info-cont {
            position: absolute;
            height: 40px;
            width: 150px;
            background: #C0C0C0;
            top: 240px;
            left: 35px
        }

        #info-map {
            position: absolute;
            height: 40px;
            width: 150px;
            background: #C0C0C0;
            top: 240px;
            left: 190px
        }

        #info-titulo h2 {
            padding-top: 3px;
            margin: 0;
            text-align: center;
            top: 3px;
            left: 90px;
        }

        #info-descp p {
            position: absolute;
            padding: 0;
            margin: 0;
            text-align: center;
            top: 10px;
            font-size: 13px;
        }

        #info-img p img {
            height: 190px;
            max-width: 100%;
            max-height: 100%;
            padding: 0px;
            margin: 0;
        }

        #info-img p {
            position: absolute;
            top: 0px;
        }

        .info-cont-ico {
            height: 15px;
            margin: 0;
            padding: 0;
        }

        #info-cont {
            font-size: 11px;
            line-height: 5px;
        }

        #info-cont p {
            position: absolute;
            top: 5px;
            left: 6px;
        }

        #info-map p a {
            position: absolute;
            text-decoration: none;
            color: black;
            left: 35px;
            top: 10px;
        }

        #info-map p a:hover {
            color: red;
        }

        #menu-flotante {
            position: absolute;
            height: 30px;
            width: 294px;
            top: 160px;
            left: 14px;
            z-index: 5;
            background: #e3e4e5;
            padding: 5px;
            font-size: 19px;
            font-family:  Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            box-shadow: 0 2px 7px 1px #cdcdcd;
        }

        #destino {
            background: #cdcdcd;
        }

        #menu-flotante-travel {
            position: absolute;
            height: 30px;
            width: 294px;
            z-index: 5;
            top: 205px;
            left: 14px;
            background: #e3e4e5;
            font-size: 19px;
            padding: 5px;
            font-family:  Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            box-shadow: 0 2px 7px 1px #cdcdcd;
        }

        #modo-viaje {
            background: #cdcdcd;
            
        }
        #ajustar-ventana {
            position: absolute;
            height: 30px;
            width: 294px;
            z-index: 5;
            top: 305px;
            left: 14px;
            background: #e3e4e5;
            font-size: 19px;
            padding: 5px;
            font-family:  Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            box-shadow: 0 2px 7px 1px #cdcdcd;
        }

        
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC_E38eEb5Z13t02OsR45ejvg7wX_1J-Ks&v=3.exp"></script>
    <script type="text/javascript">
        var marcas = [];
        var map;
        function iniciarMap() {
            var optionMap = {
                zoom: 17,
                center: new google.maps.LatLng(41.39933049527024, 2.1970036625316425),
                //En esta línea se quitan los elementos que pueden hacer ruido en la interfaz
                styles: [{
                    "featureType": "poi",
                    "stylers": [
                        { "visibility": "off" }
                    ]
                }]
            };
            map = new google.maps.Map(document.getElementById('mapAqui'), optionMap);
            // Esta línea adapta el zoom segun los marcadores que se van añadiendo
            var extencion = new google.maps.LatLngBounds();
            
            

            
            // DirectionService y DirectionRenderer permiten llamar al servicios de ruta de google maps
            var serviceDir = new google.maps.DirectionsService;
            var displayDir = new google.maps.DirectionsRenderer({
                // Permite desactivar o activar los markers del sericio de ruta
                suppressMarkers: false,
                preserveViewport: false,
            });
            //Se agrega el Renderer al mapa
            displayDir.setMap(map);
            // Se crea una variable que contendra una matriz con los datos de los bares. Se deja vacia para luego insertarle datos facilemnte.
            var baresP = [];
            //con .push se inserta información
            baresP.push({ lat: 41.40288966232697, lng: 2.198766893752577, bar: 'Xorus', id: 'ChIJ0UGVLDyjpBIRdNcVCTidgPs', img: 'image/xorus.jpg', descp: 'HolaPhasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem.<br>  Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/Xorus/', fono: '603 307 117', address: 'calle granada 90', web: 'xorus.html' });
            baresP.push({ lat: 41.3983979113559, lng: 2.204631508368948, bar: 'Blue Bar', id: 'ChIJpa-3z2qjpBIRUW4SwqLY7mk', img: 'image/bluebar.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/bluebar/', fono: '93 280 90 59', address: ' Pallars, 122', web: '' });
            baresP.push({ lat: 41.39684988162788, lng: 2.192088531196873, bar: 'D9', id: 'ChIJnVDdoRmjpBIR8Ra7Fpj8nxE', img: 'image/d9.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/LaTavernicola/', fono: '93 667 74 54', address: 'Rambla de Poblenou 44-46', web: '' });
            baresP.push({ lat: 41.400050872923345, lng: 2.2028905449215017, bar: 'El Tío Ché', id: 'ChIJxxFIXhWjpBIRv6GISCWyg3k', img: 'image/tioche.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/eltioche/', fono: '93 485 45 63', address: 'Roc boronat 70', web: 'eltioche.html' });
            baresP.push({ lat: 41.400315323140894, lng: 2.197856248397329, bar: 'La Tavernicola', id: 'ChIJk7Fa9T2jpBIRdqE3OM-I1OE', img: 'image/tavernicola.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/LaTavernicola/', fono: '93 300 27 19', address: ' Pujades, 187', web: '' });
            baresP.push({ lat: 41.39421498232687, lng: 2.1902336778967992, bar: 'VAN VAN VAR', id: 'ChIJF5JJ6xujpBIRBzATAsctpzo', img: 'image/vanvan.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/vanvanbar/', fono: '93 280 90 59', address: 'c/ Pujades, 27', web: '' });
            baresP.push({ lat: 41.39972046588015, lng: 2.197960789995136, bar: 'Koh Barcelona', id: 'ChIJ_Vo6GBajpBIRh3pxFDRwwHE', img: 'image/koh.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/kohbarcelona/', fono: '93 300 27 19', address: 'c/ Pujades 133', web: 'kohBarcelona.html' });
            baresP.push({ lat: 41.39905586185007, lng: 2.1884684125484455, bar: 'Carrot Café', id: 'ChIJOxH8OB-jpBIR7vPH-6sGdbE', img: 'image/cafe.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/carrotcafe/', fono: '93 485 45 63', address: 'Tànger 22', web: '' });
            baresP.push({ lat: 41.40018057558551, lng: 2.196335694637696, bar: 'El Quinto', id: 'ChIJ28jR1RejpBIRTRn51kfhYks', img: 'image/quinto.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/elquinto/', fono: '93 667 74 54', address: 'c/ pallars 173', web: '' });
            baresP.push({ lat: 41.40234436453319, lng: 2.1975257992744446, bar: 'Little Fern', id: 'ChIJa6oysT2jpBIR3fVfIHbKT-k', img: 'image/fern.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/littlefern/', fono: '603 307 117', address: ' Pere IV 168', web: '' });
            baresP.push({ lat: 41.40279755963731, lng: 2.204651612890757, bar: 'Nolita Brunch', id: 'ChIJq6oaXUCjpBIR64wPes1ktJo', img: 'image/brunch.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/nolitabrunch/', fono: '93 280 90 59', address: 'carrer de Lull, 230 ', web: '' });
            baresP.push({ lat: 41.402358447706334, lng: 2.195291519165039, bar: 'Sopa', id: 'ChIJURRcJD2jpBIRWs4qJD3ze3s', img: 'image/sopa.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/sopa/', fono: '93 280 90 59', address: 'Roc Boronat 114', web: '' });
            baresP.push({ lat: 41.39914909740565, lng: 2.1952463940300504, bar: 'Cafetería Industrial', id: 'ChIJL2kxw7yjpBIRfYmOftP7Zps', img: 'image/industrial.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/cafeteriaindustrial/', fono: '93 300 27 19', address: ' c/ Pallars, 154 ', web: '' });
            baresP.push({ lat: 41.400898537185796, lng: 2.1998184227581987, bar: 'La Taqueria Poblenou', id: 'ChIJ-_KWtx2jpBIRKF7h5ud3oNU', img: 'image/taqueria.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/lataqueriapoblenou/', fono: '93 485 45 63', address: 'c/ Pujades, 172', web: '' });
            baresP.push({ lat: 41.40073255300822, lng: 2.1997118049498567, bar: 'Timesburg', id: 'ChIJWZjZGj6jpBIRyx-Ib3BptuE', img: 'image/timesburg.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/timesburg/', fono: '34 93 667 74 54', address: 'Pujades, 168', web: '' });
            baresP.push({ lat: 41.398336760884284, lng: 2.198448718889267, bar: 'Can Dendê', id: 'ChIJW3zhZRajpBIREKj_RG2OBX0', img: 'image/dende.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/candende/', fono: '603 307 117', address: 'Ciutat de Granada 44', web: '' });
            baresP.push({ lat: 41.40196612959878, lng: 2.2022169828414917, bar: 'Nabibi Vital Cooking', id: 'ChIJ__Rhuj-jpBIR7ezEFfV4OiM', img: 'image/nabibi.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/nabibi/', fono: ' 931 79 17 57', address: 'Marià Aguiló 61 ', web: 'nabibi.html' });
            baresP.push({ lat: 41.401760000157886, lng: 2.1960682783626453, bar: 'Catacroquet', id: 'ChIJlc0gDj2jpBIRCeHIKTkV9QQ', img: 'image/catacroquet.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/catacroquet/', fono: '93 280 90 59', address: 'Almogàvers 211', web: '' });
            baresP.push({ lat: 41.39750899675166, lng: 2.19676075789107, bar: 'Leka', id: 'ChIJ8_vN_RajpBIRZl5Iwmowr5c', img: 'image/leka.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/leka/', fono: '93 300 27 19', address: 'Badajoz 65', web: '' });
            baresP.push({ lat: 41.39841980177608, lng: 2.1956214190337278, bar: 'Market', id: 'ChIJt7oioxejpBIRyRGWOMn0XaE', img: 'image/market.jpg', descp: 'Phasellus finibus interdum aliquam. Nulla dignissim turpis id diam suscipit pellentesque. Pellentesque neque diam, laoreet eu arcu quis, porttitor convallis nisl. Donec sed hendrerit purus, sed euismod sem. Aenean sagittis dictum nibh, at rutrum lacus semper eget.', face: 'https://www.facebook.com/market/', fono: '93 485 45 63', address: 'Badajoz 83', web: '' });
            // Las tres variables siguientes, permiten darle un efecto dinamico a los markers 
            var luz = new google.maps.MarkerImage('image/icoVioleta.png')
            var luzOver = new google.maps.MarkerImage('image/icoPlomo.png')
            var luzClick = new google.maps.MarkerImage('image/icoAzul.png')
            // se declara la variable infoVent que contendra el infowindow
            var infoVent;
            //Se crea los markers pasando por cada elemento de la matriz de bares
            function verMarcas() {
                for (var i = 0; i < baresP.length; i++) {
                    marcas[i] = new google.maps.Marker({
                        position: new google.maps.LatLng(baresP[i].lat, baresP[i].lng),
                        map: map,
                        title: baresP[i].bar,
                        icon: luz,
                        animation: google.maps.Animation.DROP,
                    });
                    // Los siguientes eventos 'escuchan' lo que pasa cuando el mouse pasa por los marcadores
                    google.maps.event.addListener(marcas[i], 'mouseover', function () {
                        this.setIcon(luzOver)
                    });
                    google.maps.event.addListener(marcas[i], 'mouseout', function () {
                        this.setIcon(luz)
                    });
                    google.maps.event.addListener(marcas[i], 'mousedown', function () {
                        this.setIcon(luzClick)
                    });
                    google.maps.event.addListener(marcas[i], 'mouseup', function () {
                        this.setIcon(luz)
                    });
                    // se crea una funcion anonima que escuchara cuando se haga click en el marker, y devolvera la ventana de infowindow
                    (function (i, marcas) {
                        google.maps.event.addListener(marcas[i], 'click', function () {
                            // el simbolo ! comprueba si existe la variable
                            if (!infoVent) {
                                infoVent = new google.maps.InfoWindow({
                                    disableAutoPan: false
                                });
                            }
                            //se agrega el contenido html al infowindow
                            infoVent.setContent('<div id="infoWindow"><div id="info-titulo"><h2>' + baresP[i].bar + '</h2></div><div id="info-descp"><p>' + baresP[i].descp + '</p> </div> <div id="info-img"> <p><img src="' + baresP[i].img + '" alt=""></p> </div> <div id="info-cont"> <p> <img class="info-cont-ico" src="image/telefono.png" alt=""> <b></b>' + baresP[i].fono + ' <img class="info-cont-ico"src="image/direccion.png" alt="">' + baresP[i].address + '</p></div><div id="info-map"><p><a id ="mostrarRuta" href="' + baresP[i].web + '">Ir a pagina</a></p></div></div>')
                            //se agrega al mapa 
                            infoVent.open(map, marcas[i])
                        });
                    })(i, marcas);
                    extencion.extend(baresP[i])
                };//termina el for
            };
            verMarcas();
            //se crea el marker d ela posición del usuario
            var miPosicion = new google.maps.MarkerImage('image/gps-icon.png')
            function ubicacionUsuario() {
                
                marcaUsuario = new google.maps.Marker({
                    position: new google.maps.LatLng(41.3976537, 2.1941345),
                    map: map,
                    title: 'Mi posición',
                    icon: miPosicion
                })
            };
            ubicacionUsuario();
            // Es parte del codigo que ajusta el zoom a cada nuevo marcador que se va agregando
            map.fitBounds(extencion);
            //limpia los markers al calcular la ruta
            function limpiarMarcas() {
                var mostraraDatos = null
                for (var i = 0; i < marcas.length; i++) {
                    marcas[i].setMap(null)
                };
                marcaUsuario.setMap(mostraraDatos)
            };
            // Parte del codigo que crea rutas
            var option, e
            // Se crea una variable que contralara el elemento 'select' del codigo html
            var caja = document.getElementById('destino');
            
            // Con este for se crea los destinos a partir de la matriz de bares
            for (e = 0; e < baresP.length; e++) {
                option = document.createElement('option'); //se crea el elemento 'option' de los select
                option.value = baresP[e].id; // se le asigna el valor que tendra al option
                option.text = baresP[e].bar; // el texto que muestra en el menu del select
                option.id = "hola"; // la clase para luego, de ser necesario, controlarla
                caja.add(option);
                // Este fragmento de codigo ayuda a cambiar de ruta
                var onCambiarRuta = function () {
                    mostrarRuta(serviceDir, displayDir);
                };
                // escucha cuando se cambia de ruta
                document.getElementById('destino').addEventListener('change', onCambiarRuta);
                //escucha cuando se cambia el modo de viaje
                document.getElementById('modo-viaje').addEventListener('change', onCambiarRuta);
               
                function mostrarRuta(serviceDir, displayDir) {
                    var seleccionModo = document.getElementById('modo-viaje').value; //toma el valor que elige el usuario
                     
                    serviceDir.route({
                        origin: new google.maps.LatLng(41.3976537, 2.1941345), // el punto de partida de la ruta
                        destination: { placeId: document.getElementById('destino').value }, // el punto final de la ruta, se uso  el place IDde cada lugar, (se puede reemplazar por un elemento LatLng)
                        travelMode: google.maps.TravelMode[seleccionModo] // modo de viaje
                    }, function (response, status) {
                        if (status === 'OK') {
                            displayDir.setDirections(response);
                            limpiarMarcas();
                        }
                        // La documentacion indica que se debe agregar el else, que devolvera el tipo de error, pero en mi caso no permite que funcione bien el cambio de rutas. Por el esta comentado la parte del else
                        /*else {
                            window.alert('hay un error en: ' + status)
                        }*/
                    });
                };
            };
        };
        google.maps.event.addDomListener(window, 'load', iniciarMap)
    </script>
</head>

<body>
    <div id="barra-fixed">
        <div id="fixed-cabecera1"> <a id="titulo" href="index.html">
                <p>22@Poblenou</p>
            </a></div>
        <div id="fixed-cabecera2">
            <p>Estas en: <br> Poblenou</p>
        </div>
        <div id="fixed-cabecera3"><a href="contacto.html">
                <p><img id="ico-tel" src="image/ico-tel.png" title="684368855"></p>
            </a></div>
        <div id="fixed-cabecera4"><a href="contacto.html">
                <p><img id="ico-mail" src="image/ico-mail.png" title="bar@poblenou.com"></p>
            </a></div>
        <div id="fixed-cabecera5"> <a href="barescerca.html">
                <p><img id="ico-nav" src="image/ico-navigate.png" title="Buscar en en el mapa"></p>
            </a></div>
    </div>
    <div id="navegacion">
        <p class="nav"><a class="nav-url" href="index.html">Inicio</a></p>
        <p class="nav"><a class="nav-url" href="barescerca.html">Restaurantes cerca</a></p>
        <p class="nav"><a class="nav-url" href="contacto.html">Contacto</a></p>
    </div>
    <div id="estructura">
        <header>
            <a href="index.html" id="main-header">22@POBLENOU</a>
        </header>
        <div id="seccion">
            <div id="contenido">
                <div id="mapAqui"></div>
                <div id="menu-flotante">
                    <b>Mostrar ruta</b>
                    <select name="" id="destino">
                        <option value="">Elegir bar</option>
                    </select>
                </div>
                <div id="menu-flotante-travel">
                    <b>Modo de viaje: </b>
                    <select name="" id="modo-viaje">
                        <option value="WALKING">Caminando</option>
                        <option value="DRIVING">Conduciendo</option>
                        <option value="BICYCLING">Bicicleteando</option>
                        <option value="TRANSIT">Público</option>
                    </select>
                </div>
                
            </div>
            <footer id="footer">
                <div id="footer-text">
                    <p>Derechos Reservados 2019-2020</p>
                </div>
            </footer>
        </div>
</body>

</html>